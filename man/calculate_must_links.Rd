% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_must_links.R
\name{calculate_must_links}
\alias{calculate_must_links}
\title{Berechnet Leverage und identifiziert die kleinen Schulen für Must-Links}
\usage{
calculate_must_links(
  df,
  threshold = 3.5,
  small_school_max_n = 3,
  selected_features = c("dg", "ds", "geschlecht"),
  feature_weights = c(dg = 1, ds = 1, geschlecht = 2)
)
}
\arguments{
\item{df}{Ein Dataframe mit den bereinigten Schülerdaten (Output von \code{read_and_clean_data}).}

\item{threshold}{Ein numerischer Schwellenwert für die Hebelwirkung (Standard: 3.5).}

\item{small_school_max_n}{Die maximale Anzahl an Schülern, bei der eine Schule
noch als "klein" gilt und potenziell zusammengehalten werden soll (Standard: 3).}
}
\value{
Ein Dataframe auf Schulebene (abgebende_schule) mit folgenden Spalten:
\describe{
\item{abgebende_schule}{Name der Schule.}
\item{n}{Anzahl der angemeldeten Kinder dieser Schule.}
\item{hebel_leistung}{Standardabweichung der kombinierten Deutschnoten (dg+ds).}
\item{hebel_sozial}{Variationskoeffizient des Migrationshintergrunds.}
\item{leverage}{Gesamte Hebelwirkung (Summe der beiden Hebel).}
\item{must_link}{Ein logischer Wert (\code{TRUE}/\code{FALSE}), der angibt, ob
diese Schule aufgrund geringer Größe (\code{n <= small_school_max_n}) und
vergleichsweise hohem Leverage (\code{leverage > threshold}) zusammenbleiben soll.}
}
}
\description{
Berechnet für jede Grundschule den Einfluss ("Leverage") auf die gesamte
Klassenzusammensetzung. Kleine Schulen, deren Schüler eine hohe Leistungs-
oder Sozialvarianz (Hebel) aufweisen, werden für Must-Link Constraints
im Anticlustering markiert, um eine Auftrennung in zu viele verschiedene
Zielklassen zu verhindern.
}
